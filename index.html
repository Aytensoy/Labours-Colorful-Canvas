<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magical Coloring Adventure</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="icons/icon-192x192.png">
    <link rel="icon" type="image/png" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="preload" href="icons/splash-logo.png" as="image" type="image/png">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        // EmailJS'nin yüklendiğini kontrol et
        if (typeof emailjs !== 'undefined') {
            console.log('✅ EmailJS loaded successfully');
            emailjs.init("8fTA3BZ9D30BF27Ce");
            console.log('✅ EmailJS initialized');
        } else {
            console.error('❌ EmailJS failed to load');
        }
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => {
                    console.log('ServiceWorker başarıyla kaydedildi');
                })
                .catch(error => {
                    console.error('ServiceWorker kaydı başarısız:', error);
                });
        }
    </script>

    <script>
        // Splash screen'i gizle ve ana içeriği göster
        document.addEventListener('DOMContentLoaded', function () {
            // Sayfanın temel yapısı hazır olduğunda, 2 saniye sonra splash'ı kaldır
            setTimeout(function () {
                const splashScreen = document.querySelector('.splash-screen');
                const mainContent = document.getElementById('mainContent');

                if (splashScreen && mainContent) {
                    splashScreen.style.display = 'none';
                    mainContent.style.display = 'block';
                }
            }, 2000); // Süreyi 2 saniyeye sabitledik
        });
    </script>
</head>

<body>
    <div class="splash-screen">
        <img src="icons/splash-logo.png" alt="Magical Coloring Game">
        <h2>Magical Coloring Game</h2>
    </div>

    <div id="mainContent" style="display: block;">
        <div class="container">
            <h1>Magical Coloring Game</h1>
            <div class="coloring-area">
                <div class="toolbar">
                    <!-- İlk Sıra -->
                    <button id="homeBtn" class="btn" aria-label="Home">🏠 Home</button>

                    <div class="tooltip-container">
                        <button id="downloadAppBtn" class="btn premium-btn" aria-label="Download & Play Offline Pro">
                            📱 Download & Play Offline Pro
                        </button>
                        <span class="tooltip">Install once, play anytime - no internet needed!</span>
                    </div>
                    <button id="magicPhotoBtn" class="btn magic-photo-btn action-btn">
                        <i class="fas fa-magic"></i>
                        Magic Photos
                    </button>
                    <button id="redeemGiftBtn" class="btn premium-btn">
                        🎁 Redeem Gift Code
                    </button>
                    <button id="notifyBtn" class="btn" aria-label="Enable App Alerts">
                        🔔 Enable App Alerts
                    </button>
                    <button id="uploadBtn" class="btn" aria-label="Upload Image">📁 Upload Image</button>

                    <!-- İkinci Sıra -->
                    <button id="newPageBtn" class="btn" aria-label="New Page">📄 Drawing Page</button>
                    <button id="fillBtn" class="btn tool-btn" aria-label="Fill">🪣 Fill</button>
                    <button id="pencilBtn" class="btn tool-btn">✏️ Pencil</button>
                    <button id="brushBtn" class="btn tool-btn">🖌️ Brush</button>
                    <button id="markerBtn" class="btn tool-btn">🖊️ Marker</button> <!-- DOĞRU ID -->
                    <button id="watercolorBtn" class="btn tool-btn">💧 Watercolor</button>
                    <button id="pastelBtn" class="btn tool-btn">🖍️ Pastel</button> <!-- DOĞRU ID -->
                    <button id="sprayBtn" class="btn tool-btn">🎨 Spray</button>
                    <button id="undoBtn" class="btn" aria-label="Undo">↩️ Undo</button>
                    <button id="eraseBtn" class="btn tool-btn">🧽 Erase</button>

                    <div class="magic-tools">
                        <button class="btn magic-btn" id="starWand">⭐ Star Wand</button>
                        <button class="btn magic-btn" id="flowerWand">🌸 Flower
                            Wand</button>
                        <button class="btn magic-btn" id="animateBtn">✨ Animate!</button>
                    </div>
                </div>
            </div>

            <div class="name-tools">
                <button id="nameBtn" onclick="activateNameWriting()">
                    💌 Write Message
                </button>
                <button id="quickNameBtn" onclick="quickAddName()">
                    ✍️ Signature
                </button>
            </div>

            <!-- Premium Tools (Sadece premium kullanıcılar görecek) -->
            <div class="premium-tools" id="premiumTools" style="display: none;">
                <button class="btn tool-btn premium-btn" id="glitterBtn" onclick="setTool('glitter')">
                    ✨ Glitter
                </button>
                <button class="btn tool-btn premium-btn" id="rainbowBtn" onclick="setTool('rainbow')">
                    🌈 Rainbow
                </button>
                <button class="btn tool-btn premium-btn" id="glowBtn" onclick="setTool('glow')">
                    💫 Glow
                </button>
            </div>

            <div class="tool-size-control">
                <input type="range" id="toolSize" min="1" max="250" value="10" onchange="updateSize(this.value)"
                    oninput="updateSize(this.value)">
                <span id="sizeValue">10</span>
            </div>

            <div class="canvas-and-palette">
                <canvas id="coloringCanvas" width="800" height="600"></canvas>
                <div id="colorPalette" class="color-palette" aria-label="Color Palette"></div>
            </div>
            <!-- Canvas Altı Butonlar -->
            <div class="bottom-buttons">
                <button id="saveBtn" class="btn" aria-label="Save">💾 Save & Download</button>
                <button id="printBtn" onclick="printCanvas()" class="btn" aria-label="Print">🖨️ Print</button>
            </div>
        </div>

        <div class="coloring-page-options">
            <h3>Choose Your Free Coloring Page</h3>

            <!-- Category Tabs -->
            <div class="category-tabs">
                <button class="tab-btn active" data-category="magical">🦄 Magical</button>
                <button class="tab-btn" data-category="flowers">🌸 Flowers</button>
                <button class="tab-btn" data-category="animals">🐱 Animals</button>
                <button class="tab-btn" data-category="mandalas">✨ Mandalas</button>
                <button class="tab-btn" data-category="various">🌟 Various</button>
            </div>

            <!-- Düzeltilmiş Thumbnail Container -->
            <div class="thumbnails-container">
                <!-- Magical Category -->
                <div class="page-thumbnails magical active">
                    <img src="thumbnails-png/unicorn.png" alt="unicorn" data-page="unicorn" class="page-thumbnail">
                    <img src="thumbnails-png/dragon.png" alt="dragon" data-page="dragon" class="page-thumbnail">
                    <img src="thumbnails-png/fairy.png" alt="fairy" data-page="fairy" class="page-thumbnail">
                    <img src="thumbnails-png/wizard.png" alt="wizard" data-page="wizard" class="page-thumbnail">
                    <img src="thumbnails-png/magic_wand.png" alt="Magic Wand" data-page="magic_wand"
                        class="page-thumbnail">
                    <img src="thumbnails-png/fantasy_castle.png" alt="Fantasy Castle" data-page="fantasy_castle"
                        class="page-thumbnail">
                    <img src="thumbnails-png/fantasy_unicorn.png" alt="Fantasy Unicorn" data-page="fantasy_unicorn"
                        class="page-thumbnail">
                    <img src="thumbnails-png/fairytale_castle.png" alt="Fairytale Castle" data-page="fairytale_castle"
                        class="page-thumbnail">
                    <img src="thumbnails-png/fairy_flying.png" alt="Flying Fairy" data-page="fairy_flying"
                        class="page-thumbnail">
                    <img src="thumbnails-png/magical_book.png" alt="Magical Book" data-page="magical_book"
                        class="page-thumbnail">
                    <img src="thumbnails-png/wizards_reading.png" alt="Wizards Reading" data-page="wizards_reading"
                        class="page-thumbnail">
                    <img src="thumbnails-png/cute_bunny_fairy.png" alt="Bunny Fairy" data-page="cute_bunny_fairy"
                        class="page-thumbnail">
                    <img src="thumbnails-png/ornate_owl.png" alt="Ornate Owl" data-page="ornate_owl"
                        class="page-thumbnail">
                </div>

                <!-- Flowers Category -->
                <div class="page-thumbnails flowers">
                    <img src="thumbnails-png/narcissus.png" alt="narcissus" data-page="narcissus"
                        class="page-thumbnail">
                    <img src="thumbnails-png/poppies.png" alt="poppies" data-page="poppies" class="page-thumbnail">
                    <img src="thumbnails-png/daisies.png" alt="daisies" data-page="daisies" class="page-thumbnail">
                    <img src="thumbnails-png/carnation.png" alt="carnation" data-page="carnation"
                        class="page-thumbnail">
                    <img src="thumbnails-png/floral_frame.png" alt="Floral Frame" data-page="floral_frame"
                        class="page-thumbnail">
                    <img src="thumbnails-png/doodle_flowers.png" alt="Doodle Flowers" data-page="doodle_flowers"
                        class="page-thumbnail">
                    <img src="thumbnails-png/heart_flowers.png" alt="Heart Flowers" data-page="heart_flowers"
                        class="page-thumbnail">
                    <img src="thumbnails-png/detailed_flowers.png" alt="Detailed Flowers" data-page="detailed_flowers"
                        class="page-thumbnail">
                    <img src="thumbnails-png/big_flower.png" alt="Big Flower" data-page="big_flower"
                        class="page-thumbnail">
                    <img src="thumbnails-png/simple_flower.png" alt="Simple Flower" data-page="simple_flower"
                        class="page-thumbnail">
                    <img src="thumbnails-png/lotus_flowers.png" alt="Lotus Flowers" data-page="lotus_flowers"
                        class="page-thumbnail">
                </div>

                <!-- Animals Category -->
                <div class="page-thumbnails animals">
                    <img src="thumbnails-png/cat_and_dog.png" alt="Cat and Dog" data-page="cat_and_dog"
                        class="page-thumbnail">
                    <img src="thumbnails-png/flapping_bird.png" alt="Flapping Bird" data-page="flapping_bird"
                        class="page-thumbnail">
                    <img src="thumbnails-png/iconic_birds.png" alt="Iconic Birds" data-page="iconic_birds"
                        class="page-thumbnail">
                    <img src="thumbnails-png/smiling_fish.png" alt="Smiling Fish" data-page="smiling_fish"
                        class="page-thumbnail">
                    <img src="thumbnails-png/cute_elephant.png" alt="Cute Elephant" data-page="cute_elephant"
                        class="page-thumbnail">
                    <img src="thumbnails-png/birds_on_branch.png" alt="Birds on Branch" data-page="birds_on_branch"
                        class="page-thumbnail">
                    <img src="thumbnails-png/happy_kangaroo.png" alt="Happy Kangaroo" data-page="happy_kangaroo"
                        class="page-thumbnail">
                    <img src="thumbnails-png/bear_in_forest.png" alt="Bear in Forest" data-page="bear_in_forest"
                        class="page-thumbnail">
                    <img src="thumbnails-png/funny_monkey.png" alt="Funny Monkey" data-page="funny_monkey"
                        class="page-thumbnail">
                    <img src="thumbnails-png/cute_bunny.png" alt="Cute Bunny" data-page="cute_bunny"
                        class="page-thumbnail">
                    <img src="thumbnails-png/kitten_in_garden.png" alt="Kitten in Garden" data-page="kitten_in_garden"
                        class="page-thumbnail">
                    <img src="thumbnails-png/happy_whale.png" alt="Happy Whale" data-page="happy_whale"
                        class="page-thumbnail">
                    <img src="thumbnails-png/squirrel_with_acorn.png" alt="Squirrel with Acorn"
                        data-page="squirrel_with_acorn" class="page-thumbnail">
                    <img src="thumbnails-png/butterflies.png" alt="Butterflies" data-page="butterflies"
                        class="page-thumbnail">
                    <img src="thumbnails-png/bulldog_portrait.png" alt="Bulldog Portrait" data-page="bulldog_portrait"
                        class="page-thumbnail">
                    <img src="thumbnails-png/frog_on_grass.png" alt="Frog on Grass" data-page="frog_on_grass"
                        class="page-thumbnail">
                    <img src="thumbnails-png/cute_lamb.png" alt="Cute Lamb" data-page="cute_lamb"
                        class="page-thumbnail">
                    <img src="thumbnails-png/kawaii_bunny_face.png" alt="Kawaii Bunny" data-page="kawaii_bunny_face"
                        class="page-thumbnail">
                    <img src="thumbnails-png/cat_on_crocodile.png" alt="Cat on Crocodile" data-page="cat_on_crocodile"
                        class="page-thumbnail">
                </div>

                <!-- Mandalas Category -->
                <div class="page-thumbnails mandalas">
                    <img src="thumbnails-png/sun_mandala.png" alt="Sun Mandala" data-page="sun_mandala"
                        class="page-thumbnail">
                    <img src="thumbnails-png/modern_mandala.png" alt="Modern Mandala" data-page="modern_mandala"
                        class="page-thumbnail">
                    <img src="thumbnails-png/tree_of_life.png" alt="Tree of Life" data-page="tree_of_life"
                        class="page-thumbnail">
                    <img src="thumbnails-png/oriental_mandala.png" alt="Oriental Mandala" data-page="oriental_mandala"
                        class="page-thumbnail">
                    <img src="thumbnails-png/mandala_pattern.png" alt="Mandala Pattern" data-page="mandala_pattern"
                        class="page-thumbnail">
                    <img src="thumbnails-png/mandala_horse.png" alt="Mandala Horse" data-page="mandala_horse"
                        class="page-thumbnail">
                    <img src="thumbnails-png/mandala_bird.png" alt="Mandala Bird" data-page="mandala_bird"
                        class="page-thumbnail">
                    <img src="thumbnails-png/panda_mandala.png" alt="Panda Mandala" data-page="panda_mandala"
                        class="page-thumbnail">
                    <img src="thumbnails-png/detailed_lotus_mandala.png" alt="Detailed Lotus Mandala"
                        data-page="detailed_lotus_mandala" class="page-thumbnail">
                    <img src="thumbnails-png/mandala_flower.png" alt="Mandala Flower" data-page="mandala_flower"
                        class="page-thumbnail">
                    <img src="thumbnails-png/circle_mandala.png" alt="Circle Mandala" data-page="circle_mandala"
                        class="page-thumbnail">
                </div>
                <!-- Various Category -->
                <div class="page-thumbnails various">
                    <img src="thumbnails-png/boho_style.png" alt="Boho Style" data-page="boho_style"
                        class="page-thumbnail">
                    <img src="thumbnails-png/boat.png" alt="Boat" data-page="boat" class="page-thumbnail">
                    <img src="thumbnails-png/k-pop.png" alt="K-Pop" data-page="k-pop" class="page-thumbnail">
                    <img src="thumbnails-png/cute_cat.png" alt="Cute Cat" data-page="cute_cat" class="page-thumbnail">
                    <img src="thumbnails-png/shapes.png" alt="Shapes" data-page="shapes" class="page-thumbnail">
                    <img src="thumbnails-png/girl_on_swing.png" alt="Girl on Swing" data-page="girl_on_swing"
                        class="page-thumbnail">
                    <img src="thumbnails-png/beach_cleanup_boy.png" alt="Beach Cleanup Boy"
                        data-page="beach_cleanup_boy" class="page-thumbnail">
                    <img src="thumbnails-png/boy_on_swing.png" alt="Boy on Swing" data-page="boy_on_swing"
                        class="page-thumbnail">
                    <img src="thumbnails-png/craft_girl.png" alt="Craft Girl" data-page="craft_girl"
                        class="page-thumbnail">
                    <img src="thumbnails-png/boy_with_glasses.png" alt="Boy with Glasses" data-page="boy_with_glasses"
                        class="page-thumbnail">
                    <img src="thumbnails-png/kawaii_twin_girls.png" alt="Kawaii Twin Girls"
                        data-page="kawaii_twin_girls" class="page-thumbnail">
                    <img src="thumbnails-png/dancing_bean_character.png" alt="Dancing Bean"
                        data-page="dancing_bean_character" class="page-thumbnail">
                </div>
            </div>
            <div class="game-introduction">
                <h2>Welcome to Your Magical Coloring Adventure!</h2>
                <p>Unleash your creativity and bring worlds to life with a splash of color! Our enchanting coloring
                    experience is designed for artists of all ages.</p>

                <h3>🌟 Explore a Universe of Tools:</h3>
                <ul>
                    <li>💾 <strong>Download & Play Offline Pro:</strong> Take the entire game with you! Color on planes,
                        in cars, or anywhere your adventure leads, no internet needed.</li>
                    <li>🎨 <strong>Vast Library of Pages:</strong> Discover 50+ beautiful coloring pages across 5
                        magical categories. Free users enjoy 3 pages per category, while Premium unlocks the entire
                        universe!</li>
                    <li>🖌️ <strong>Professional Drawing Tools:</strong>
                        <ul>
                            <li><strong>Standard Tools:</strong> Master your art with the classic Pencil, smooth Brush,
                                delicate Watercolor, and fun Spray paint.</li>
                            <li><strong>NEW Unique Brushes:</strong> Create bold strokes with the vibrant
                                <strong>Marker</strong> and achieve beautiful, textured effects with the realistic
                                <strong>Pastel</strong> brush.
                            </li>
                            <li><strong>Premium Magic Tools:</strong> Go Premium to dazzle your creations with sparkling
                                <strong>Glitter</strong>, flowing <strong>Rainbow</strong> colors, and radiant
                                <strong>Glow</strong> effects!
                            </li>
                        </ul>
                    </li>
                    <li>✨ <strong>Magic Wands & More:</strong> Instantly add flair with the Star and Flower Wands, or
                        color huge areas in a second with the Magic Fill tool.</li>
                    <li>🖼️ <strong>NEW! Magic Photos:</strong> Become part of the art! Place your photo into fun
                        templates like a heroic firefighter, a magical princess, or a space explorer!</li>
                    <li>⬆️ <strong>Upload Your Own Pages (Premium):</strong> Bring your own drawings or AI-generated art
                        to life with our professional tools.</li>
                    <li>💾 <strong>Save in High Definition (Premium):</strong> Free users get 3 daily saves, while
                        Premium users get unlimited saves in stunning High Definition!</li>
                    <li>↩️ <strong>Worry-Free Creating:</strong> Easily Undo and Redo any stroke.</li>
                    <li>✨ <strong>Animate Your Art:</strong> Bring your colored characters to life with a single click
                        on the "Animate!" button.</li>
                    <li>🖨️ <strong>Print & Color:</strong> Download and print any page for a classic, hands-on coloring
                        experience.</li>
                </ul>

                <h3>🌟 Why Go Premium?</h3>
                <div class="premium-benefits">
                    <h4>📱 Perfect for Travel & On-the-Go Fun:</h4>
                    <p>The complete offline game is the ultimate travel companion for kids and adults alike. No more
                        "are we there yet?" moments!</p>
                    <h4>🎨 For the Creative Soul:</h4>
                    <p>Unlock every page, every premium tool, and the ability to upload your own art. Your creativity
                        will know no bounds!</p>
                    <h4>👨‍👩‍👧‍👦 Incredible Family Value:</h4>
                    <p>One single purchase unlocks unlimited, ad-free fun for the whole family. No subscriptions, no
                        limits—just pure creative joy!</p>
                </div>

                <p>Ready to create your masterpiece? Grab your virtual paintbrush and let your imagination soar. Happy
                    coloring! 🌈✨</p>
            </div>
            <footer class="copyright">
                <div class="social-buttons">
                    <a href="mailto:labourthings2@gmail.com" class="social-button email" aria-label="Send us an Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                    <a href="https://www.facebook.com/labourthings" target="_blank" rel="noopener noreferrer"
                        class="social-button facebook" aria-label="Visit our Facebook page">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/labour_things" target="_blank" rel="noopener noreferrer"
                        class="social-button instagram" aria-label="Visit our Instagram page">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
                <p>&copy; 2025 Labour Things. All rights reserved. | Magical Coloring Game</p>
            </footer>
        </div>
        <script>
            // Son çare - doğrudan HTML'e gömülü çözüm
            window.onload = function () {
                // Sayfanın tamamen yüklenmesini bekle
                setTimeout(function () {
                    console.log("HTML içindeki thumbnail düzeltme kodu çalışıyor...");

                    // Tüm thumbnail'ları bul
                    var thumbs = document.querySelectorAll('.page-thumbnail');
                    console.log(thumbs.length + " thumbnail bulundu");

                    // Her thumbnail'a tıklama olayı ekle
                    for (var i = 0; i < thumbs.length; i++) {
                        thumbs[i].onclick = function () {
                            var pageName = this.getAttribute('data-page');
                            console.log("Tıklanan: " + pageName);

                            // Manuel olarak boyama sayfasını yükle
                            var img = new Image();
                            img.crossOrigin = "anonymous";

                            img.onload = function () {
                                var c = document.getElementById('coloringCanvas');
                                var cx = c.getContext('2d');

                                cx.fillStyle = 'white';
                                cx.fillRect(0, 0, c.width, c.height);

                                // Resmi canvas'a çiz
                                cx.drawImage(img, 0, 0, c.width, c.height);
                                console.log("Resim yüklendi!");
                            };

                            img.src = "coloring-pages-png/" + pageName + ".png";
                        };
                    }

                    console.log("Thumbnail olayları ayarlandı!");
                }, 3000); // 3 saniye bekle
            };
        </script>

        <script>
            // PREMIUM KONTROL - TEMİZ VERSİYON
            window.addEventListener('load', function () {
                console.log('Premium kontrol başlatılıyor...');

                // Premium durumunu kontrol et
                var isPremiumUser = localStorage.getItem('isPremium') === 'true';
                console.log('Premium kullanıcı:', isPremiumUser);

                // Eski premium etiketlerini temizle
                var existingElements = document.querySelectorAll('.premium-badge, .premium-tooltip, .premium-overlay, .lock-overlay, .single-pro-badge');
                existingElements.forEach(function (el) {
                    if (el && el.parentNode) {
                        el.parentNode.removeChild(el);
                    }
                });

                // Bulanıklığı kaldır
                var style = document.createElement('style');
                style.textContent = `
        .page-thumbnail.locked {
          filter: none !important;
          opacity: 1 !important;
        }
        
        /* Pro rozeti stili */
        .pro-badge {
          position: absolute;
          bottom: 5px;
          right: 5px;
          background: linear-gradient(135deg, #FFB347, #FFCC33);
          color: white;
          font-size: 9px;
          font-weight: bold;
          padding: 1px 4px;
          border-radius: 3px;
          box-shadow: 0 1px 2px rgba(0,0,0,0.2);
          z-index: 1000;
        }
        
    .pro-tooltip {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #FFD700, #FFA500); /* ← Premium sarı gradient */
    color: #2c3e50; /* ← Siyah/koyu gri yazı */
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    font-weight: bold; /* ← Kalın yazı ekleyin */
    width: 180px;
    text-align: center;
    z-index: 10000;
    display: none;
    box-shadow: 0 3px 10px rgba(255, 215, 0, 0.4); /* ← Altın gölge */
}
        
        .pro-tooltip:after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          margin-left: -5px;
          border-width: 5px;
          border-style: solid;
          border-color: rgba(0, 0, 0, 0.8) transparent transparent transparent;
        }
        
        .thumbnail-container {
          position: relative;
          display: inline-block;
        }
        
        .thumbnail-container:hover .pro-tooltip {
          display: block;
        }
      `;
                document.head.appendChild(style);

                // Premium modunda kontroller
                if (isPremiumUser) {
                    // Premium araçlarını göster
                    var premiumTools = document.getElementById('premiumTools');
                    if (premiumTools) {
                        premiumTools.style.display = 'flex';
                    }
                    return;
                }

                // Her kategori için işlem yap
                var categories = ['magical', 'flowers', 'animals', 'mandalas', 'various'];

                categories.forEach(function (category) {
                    var container = document.querySelector('.page-thumbnails.' + category);
                    if (!container) return;

                    var thumbnails = container.querySelectorAll('img.page-thumbnail');

                    // Her kategoride ilk 3 thumbnail dışındakilere Pro işareti ekle
                    thumbnails.forEach(function (thumbnail, index) {
                        if (index >= 3) {
                            // Bulanıklığı kaldır
                            thumbnail.style.filter = 'none';
                            thumbnail.style.opacity = '1';

                            // Container oluştur
                            var container = document.createElement('div');
                            container.className = 'thumbnail-container';
                            container.style.position = 'relative';
                            container.style.display = 'inline-block';

                            // Thumbnail'i container'a taşı
                            var parent = thumbnail.parentNode;
                            parent.insertBefore(container, thumbnail);
                            container.appendChild(thumbnail);

                            // Pro rozeti ekle
                            var badge = document.createElement('div');
                            badge.className = 'pro-badge';
                            badge.textContent = 'Pro';
                            container.appendChild(badge);

                            // Tooltip ekle
                            var tooltip = document.createElement('div');
                            tooltip.className = 'pro-tooltip';
                            tooltip.textContent = 'For Premium users!';
                            container.appendChild(tooltip);

                            // Overlay ekle
                            var overlay = document.createElement('div');
                            overlay.style.position = 'absolute';
                            overlay.style.top = '0';
                            overlay.style.left = '0';
                            overlay.style.width = '100%';
                            overlay.style.height = '100%';
                            overlay.style.cursor = 'pointer';
                            overlay.style.zIndex = '1500';
                            container.appendChild(overlay);

                            // Tıklama olayı
                            overlay.addEventListener('click', function (e) {
                                e.preventDefault();
                                e.stopPropagation();

                                if (typeof showPremiumModal === 'function') {
                                    showPremiumModal();
                                } else {
                                    alert('This feature is only available for Premium users!');
                                }

                                return false;
                            });

                            // Thumbnail tıklama olayını devre dışı bırak
                            thumbnail.addEventListener('click', function (e) {
                                e.preventDefault();
                                e.stopPropagation();
                                return false;
                            }, true);
                        }
                    });
                });

                console.log('Premium kontrol tamamlandı');
            });
        </script>
        <script>
            // MOBİL CİHAZLAR İÇİN FILL ARACI DÜZELTME
            (function () {
                // Mobil cihaz kontrolü
                var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

                // Sayfa yüklendiğinde çalış
                window.addEventListener('load', function () {
                    // Fill butonunu bul
                    var fillButton = document.getElementById('fillBtn');
                    if (!fillButton) return;

                    // Orijinal işlevi koru
                    var originalSetTool = window.setTool;

                    // Fill için özel işlev
                    fillButton.addEventListener('click', function () {
                        // Canvas ve context'i bul
                        var canvas = document.getElementById('coloringCanvas');
                        var ctx = canvas.getContext('2d');

                        // Canvas ayarlarını yenile
                        ctx.globalAlpha = 1.0;
                        ctx.globalCompositeOperation = 'source-over';

                        console.log('Fill aracı seçildi, ayarlar sıfırlandı:',
                            'Alpha:', ctx.globalAlpha,
                            'Composite:', ctx.globalCompositeOperation);

                        // Orijinal setTool'u çağır
                        if (typeof originalSetTool === 'function') {
                            originalSetTool('fill');
                        } else {
                            window.currentTool = 'fill';
                        }
                    });

                    if (isMobile) {
                        console.log('Mobil cihaz - fill enhancement atlandı');
                    }
                });
            })();
        </script>
        <!-- Newsletter Popup -->
        <div id="newsletterModal" class="newsletter-modal" style="display: none;">
            <div class="newsletter-content">
                <span class="newsletter-close" onclick="closeNewsletterModal()">&times;</span>
                <h2>🎨 Special Offers & Updates!</h2>
                <p>Get exclusive discounts, free coloring pages & early access to premium tools!</p>

                <form id="newsletterForm" onsubmit="return false;" novalidate>
                    <input type="text" id="userName" placeholder="Your Name (Optional)" aria-label="Your Name" />
                    <input type="email" id="userEmail" placeholder="Your Email" aria-label="Your Email" />
                    <button type="submit" id="subscribeBtn">✨ Subscribe</button>
                </form>

                <p class="newsletter-note">We'll only send you the good stuff! 🌟</p>
            </div>
        </div>

        <!-- Newsletter Button -->
        <button id="newsletterTrigger" class="newsletter-trigger">
            📧 Get Updates
        </button>
    </div>
    <!-- ... (diğer tüm içeriğiniz) ... -->

    <!-- MAGIC PHOTOS İÇİN GİZLİ DOSYA YÜKLEME INPUT'U -->
    <input type="file" id="magicPhotoInput" accept="image/*" style="display: none;">

    <script src="script.js"></script>
</body>

</html>
</body>

</html>