<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magical Coloring Adventure</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- <link rel="manifest" href="manifest.json"> -->
    <link rel="icon" type="image/x-icon" href="icons/icon-192x192.png">
    <link rel="icon" type="image/png" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="preload" href="icons/splash-logo.png" as="image" type="image/png">
    <!-- EmailJS Library - Eski stabil versiyon -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>// EmailJS'nin yÃ¼klendiÄŸini kontrol et
        if (typeof emailjs !== 'undefined') {
            console.log('âœ… EmailJS loaded successfully');
        } else {
            console.error('âŒ EmailJS failed to load');
        }
    </script>
    <!-- Service Worker kaydÄ± buraya -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => {
                    console.log('ServiceWorker baÅŸarÄ±yla kaydedildi');
                })
                .catch(error => {
                    console.error('ServiceWorker kaydÄ± baÅŸarÄ±sÄ±z:', error);
                });
        }
    </script>
    <script>
        // Canvas'Ä± baÅŸlatma fonksiyonu
        function initializeCanvas() {
            const canvas = document.getElementById('myCanvas');
            const ctx = canvas.getContext('2d');
            // Canvas'Ä± temizle ve baÅŸlangÄ±Ã§ durumuna getir
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Buraya canvas'Ä± baÅŸlatma kodlarÄ±nÄ± ekleyin
        }

        // Drawing page aÃ§Ä±ldÄ±ÄŸÄ±nda canvas'Ä± gÃ¼ncelle
        document.addEventListener('DOMContentLoaded', function () {
            const newPageBtn = document.getElementById('newPageBtn');
            if (newPageBtn) {
                newPageBtn.addEventListener('click', () => {
                    initializeCanvas();
                });
            } else {
                console.error("newPageBtn element not found");
            }
        });
    </script>
    <script>
        // Coloring Pages iÃ§in Ã¶nceden yÃ¼kleme
        // Preload script'ini gÃ¼ncelleyin
        document.addEventListener('DOMContentLoaded', function () {
            console.log("Boyama sayfalarÄ± Ã¶nceden yÃ¼kleniyor...");
            const pagesToPreload = [
                "unicorn", "dragon", "fairy", "wizard",
                "narcissus", "poppies", "daisies", "carnation",
                "cat_and_dog", "flapping_bird", "iconic_birds", "smiling_fish",
                "sun_mandala", "modern_mandala", "tree_of_life", "oriental_mandala",
                "boho_style", "boat", "k-pop", "cute_cat", "shapes",

                // YENÄ° SAYFALAR
                // Magical
                "magic_wand", "fantasy_castle", "fantasy_unicorn", "fairytale_castle",
                "fairy_flying", "magical_book", "wizards_reading", "cute_bunny_fairy", "ornate_owl",

                // Flowers
                "floral_frame", "doodle_flowers", "heart_flowers", "detailed_flowers",
                "big_flower", "simple_flower", "lotus_flowers",

                // Animals
                "cute_elephant", "birds_on_branch", "happy_kangaroo", "bear_in_forest",
                "funny_monkey", "cute_bunny", "kitten_in_garden", "happy_whale",
                "squirrel_with_acorn", "butterflies", "bulldog_portrait", "frog_on_grass",
                "cute_lamb", "kawaii_bunny_face", "cat_on_crocodile",

                // Mandalas
                "mandala_pattern", "mandala_horse", "mandala_bird", "panda_mandala",
                "detailed_lotus_mandala", "mandala_flower", "circle_mandala",

                // Various
                "girl_on_swing", "beach_cleanup_boy", "boy_on_swing", "craft_girl",
                "boy_with_glasses", "kawaii_twin_girls", "dancing_bean_character"
            ];


            pagesToPreload.forEach(page => {
                const link = document.createElement('link');
                link.rel = "preload";
                link.as = "image";
                link.href = `coloring-pages-png/${page}.png`;
                link.crossOrigin = "anonymous"; // Bu satÄ±rÄ± ekleyin
                document.head.appendChild(link);

                console.log(`Ã–nceden yÃ¼kleme baÄŸlantÄ±sÄ± eklendi: ${link.href}`);
            });
        });
    </script>
</head>

<body>
    <div class="splash-screen">
        <img src="icons/splash-logo.png" alt="Magical Coloring Game">
        <h2>Magical Coloring Game</h2>
    </div>

    <div id="mainContent" style="display: none;">
        <div class="container">
            <h1>Magical Coloring Game</h1>
            <div class="coloring-area">
                <div class="toolbar">
                    <!-- Ä°lk SÄ±ra -->
                    <button id="homeBtn" class="btn" aria-label="Home">ğŸ  Home</button>
                    <div class="tooltip-container">
                        <button id="downloadAppBtn" class="btn premium-btn" aria-label="Download & Play Offline Pro">
                            ğŸ“± Download & Play Offline Pro
                        </button>
                        <span class="tooltip">Install once, play anytime - no internet needed!</span>
                    </div>
                    <button id="notifyBtn" class="btn" aria-label="Enable App Alerts">
                        ğŸ”” Enable App Alerts
                    </button>
                    <!-- Enable App Alerts butonundan HEMEN SONRA bu kodu ekleyin -->
                    <script>
                        // Bildirim butonu iÃ§in direkt script
                        document.addEventListener('DOMContentLoaded', function () {
                            setTimeout(function () {
                                const notifyBtn = document.getElementById('notifyBtn');
                                if (notifyBtn) {
                                    notifyBtn.onclick = function () {
                                        if ('Notification' in window) {
                                            Notification.requestPermission().then(permission => {
                                                if (permission === 'granted') {
                                                    new Notification('ğŸ¨ Magical Coloring Game', {
                                                        body: 'Bildirimler etkinleÅŸtirildi!',
                                                        icon: './icons/icon-192x192.png'
                                                    });
                                                    this.innerHTML = 'ğŸ”” Alerts Enabled';
                                                    this.classList.add('active');
                                                }
                                            });
                                        }
                                    }
                                }
                            }, 3000);
                        });
                    </script>
                    <button id="uploadBtn" class="btn" aria-label="Upload Image">ğŸ“ Upload Image</button>

                    <!-- Ä°kinci SÄ±ra -->
                    <button id="newPageBtn" class="btn" aria-label="New Page">ğŸ“„ Drawing Page</button>
                    <button id="fillBtn" class="btn tool-btn" aria-label="Fill">ğŸª£ Fill</button>
                    <button id="pencilBtn" class="btn tool-btn" onclick="setTool('pencil')">âœï¸ Pencil</button>
                    <button id="brushBtn" class="btn tool-btn" onclick="setTool('brush')">ğŸ–Œï¸ Brush</button>
                    <button id="watercolorBtn" class="btn tool-btn" onclick="setTool('watercolor')">ğŸ’§
                        Watercolor</button>
                    <button id="sprayBtn" class="btn tool-btn" onclick="setTool('spray')">ğŸ¨ Spray</button>
                    <button id="undoBtn" class="btn" aria-label="Undo">â†©ï¸ Undo</button>
                    <button id="eraseBtn" class="btn tool-btn" onclick="setTool('erase')">ğŸ§½ Erase</button>

                    <div class="magic-tools">
                        <button class="btn magic-btn" id="starWand" onclick="setTool('star')">â­ Star Wand</button>
                        <button class="btn magic-btn" id="flowerWand" onclick="setTool('flower')">ğŸŒ¸ Flower
                            Wand</button>
                        <button class="btn magic-btn" id="animateBtn">âœ¨ Animate!</button>
                    </div>
                </div>
                <!-- Bu kodu index.html'de magic-tools div'inden SONRA ekleyin -->

                <!-- Premium Tools (Sadece premium kullanÄ±cÄ±lar gÃ¶recek) -->
                <div class="premium-tools" id="premiumTools" style="display: none;">
                    <button class="btn tool-btn premium-btn" id="glitterBtn" onclick="setTool('glitter')">
                        âœ¨ Glitter
                    </button>
                    <button class="btn tool-btn premium-btn" id="rainbowBtn" onclick="setTool('rainbow')">
                        ğŸŒˆ Rainbow
                    </button>
                    <button class="btn tool-btn premium-btn" id="glowBtn" onclick="setTool('glow')">
                        ğŸ’« Glow
                    </button>
                </div>


                <div class="tool-size-control">
                    <input type="range" id="toolSize" min="1" max="50" value="10" onchange="updateSize(this.value)"
                        oninput="updateSize(this.value)">
                    <span id="sizeValue">10</span>
                </div>

                <div class="canvas-and-palette">
                    <canvas id="coloringCanvas" width="800" height="600"></canvas>
                    <div id="colorPalette" class="color-palette" aria-label="Color Palette"></div>
                </div>
                <!-- Canvas AltÄ± Butonlar -->
                <div class="bottom-buttons">
                    <button id="saveBtn" class="btn" aria-label="Save">ğŸ’¾ Save & Download</button>
                    <button onclick="printCanvas()" class="btn" aria-label="Print">ğŸ–¨ï¸ Print</button>
                </div>
            </div>

            <div class="coloring-page-options">
                <h3>Choose Your Free Coloring Page</h3>



                <!-- Category Tabs -->
                <div class="category-tabs">
                    <button class="tab-btn active" data-category="magical">ğŸ¦„ Magical</button>
                    <button class="tab-btn" data-category="flowers">ğŸŒ¸ Flowers</button>
                    <button class="tab-btn" data-category="animals">ğŸ± Animals</button>
                    <button class="tab-btn" data-category="mandalas">âœ¨ Mandalas</button>
                    <button class="tab-btn" data-category="various">ğŸŒŸ Various</button>
                </div>

                <!-- DÃ¼zeltilmiÅŸ Thumbnail Container -->
                <div class="thumbnails-container">
                    <!-- Magical Category -->
                    <div class="page-thumbnails magical active">
                        <img src="thumbnails-png/unicorn.png" alt="unicorn" data-page="unicorn" class="page-thumbnail">
                        <img src="thumbnails-png/dragon.png" alt="dragon" data-page="dragon" class="page-thumbnail">
                        <img src="thumbnails-png/fairy.png" alt="fairy" data-page="fairy" class="page-thumbnail">
                        <img src="thumbnails-png/wizard.png" alt="wizard" data-page="wizard" class="page-thumbnail">
                        <img src="thumbnails-png/magic_wand.png" alt="Magic Wand" data-page="magic_wand"
                            class="page-thumbnail">
                        <img src="thumbnails-png/fantasy_castle.png" alt="Fantasy Castle" data-page="fantasy_castle"
                            class="page-thumbnail">
                        <img src="thumbnails-png/fantasy_unicorn.png" alt="Fantasy Unicorn" data-page="fantasy_unicorn"
                            class="page-thumbnail">
                        <img src="thumbnails-png/fairytale_castle.png" alt="Fairytale Castle"
                            data-page="fairytale_castle" class="page-thumbnail">
                        <img src="thumbnails-png/fairy_flying.png" alt="Flying Fairy" data-page="fairy_flying"
                            class="page-thumbnail">
                        <img src="thumbnails-png/magical_book.png" alt="Magical Book" data-page="magical_book"
                            class="page-thumbnail">
                        <img src="thumbnails-png/wizards_reading.png" alt="Wizards Reading" data-page="wizards_reading"
                            class="page-thumbnail">
                        <img src="thumbnails-png/cute_bunny_fairy.png" alt="Bunny Fairy" data-page="cute_bunny_fairy"
                            class="page-thumbnail">
                        <img src="thumbnails-png/ornate_owl.png" alt="Ornate Owl" data-page="ornate_owl"
                            class="page-thumbnail">
                    </div>

                    <!-- Flowers Category -->
                    <div class="page-thumbnails flowers">
                        <img src="thumbnails-png/narcissus.png" alt="narcissus" data-page="narcissus"
                            class="page-thumbnail">
                        <img src="thumbnails-png/poppies.png" alt="poppies" data-page="poppies" class="page-thumbnail">
                        <img src="thumbnails-png/daisies.png" alt="daisies" data-page="daisies" class="page-thumbnail">
                        <img src="thumbnails-png/carnation.png" alt="carnation" data-page="carnation"
                            class="page-thumbnail">
                        <img src="thumbnails-png/floral_frame.png" alt="Floral Frame" data-page="floral_frame"
                            class="page-thumbnail">
                        <img src="thumbnails-png/doodle_flowers.png" alt="Doodle Flowers" data-page="doodle_flowers"
                            class="page-thumbnail">
                        <img src="thumbnails-png/heart_flowers.png" alt="Heart Flowers" data-page="heart_flowers"
                            class="page-thumbnail">
                        <img src="thumbnails-png/detailed_flowers.png" alt="Detailed Flowers"
                            data-page="detailed_flowers" class="page-thumbnail">
                        <img src="thumbnails-png/big_flower.png" alt="Big Flower" data-page="big_flower"
                            class="page-thumbnail">
                        <img src="thumbnails-png/simple_flower.png" alt="Simple Flower" data-page="simple_flower"
                            class="page-thumbnail">
                        <img src="thumbnails-png/lotus_flowers.png" alt="Lotus Flowers" data-page="lotus_flowers"
                            class="page-thumbnail">
                    </div>

                    <!-- Animals Category -->
                    <div class="page-thumbnails animals">
                        <img src="thumbnails-png/cat_and_dog.png" alt="Cat and Dog" data-page="cat_and_dog"
                            class="page-thumbnail">
                        <img src="thumbnails-png/flapping_bird.png" alt="Flapping Bird" data-page="flapping_bird"
                            class="page-thumbnail">
                        <img src="thumbnails-png/iconic_birds.png" alt="Iconic Birds" data-page="iconic_birds"
                            class="page-thumbnail">
                        <img src="thumbnails-png/smiling_fish.png" alt="Smiling Fish" data-page="smiling_fish"
                            class="page-thumbnail">
                        <img src="thumbnails-png/cute_elephant.png" alt="Cute Elephant" data-page="cute_elephant"
                            class="page-thumbnail">
                        <img src="thumbnails-png/birds_on_branch.png" alt="Birds on Branch" data-page="birds_on_branch"
                            class="page-thumbnail">
                        <img src="thumbnails-png/happy_kangaroo.png" alt="Happy Kangaroo" data-page="happy_kangaroo"
                            class="page-thumbnail">
                        <img src="thumbnails-png/bear_in_forest.png" alt="Bear in Forest" data-page="bear_in_forest"
                            class="page-thumbnail">
                        <img src="thumbnails-png/funny_monkey.png" alt="Funny Monkey" data-page="funny_monkey"
                            class="page-thumbnail">
                        <img src="thumbnails-png/cute_bunny.png" alt="Cute Bunny" data-page="cute_bunny"
                            class="page-thumbnail">
                        <img src="thumbnails-png/kitten_in_garden.png" alt="Kitten in Garden"
                            data-page="kitten_in_garden" class="page-thumbnail">
                        <img src="thumbnails-png/happy_whale.png" alt="Happy Whale" data-page="happy_whale"
                            class="page-thumbnail">
                        <img src="thumbnails-png/squirrel_with_acorn.png" alt="Squirrel with Acorn"
                            data-page="squirrel_with_acorn" class="page-thumbnail">
                        <img src="thumbnails-png/butterflies.png" alt="Butterflies" data-page="butterflies"
                            class="page-thumbnail">
                        <img src="thumbnails-png/bulldog_portrait.png" alt="Bulldog Portrait"
                            data-page="bulldog_portrait" class="page-thumbnail">
                        <img src="thumbnails-png/frog_on_grass.png" alt="Frog on Grass" data-page="frog_on_grass"
                            class="page-thumbnail">
                        <img src="thumbnails-png/cute_lamb.png" alt="Cute Lamb" data-page="cute_lamb"
                            class="page-thumbnail">
                        <img src="thumbnails-png/kawaii_bunny_face.png" alt="Kawaii Bunny" data-page="kawaii_bunny_face"
                            class="page-thumbnail">
                        <img src="thumbnails-png/cat_on_crocodile.png" alt="Cat on Crocodile"
                            data-page="cat_on_crocodile" class="page-thumbnail">
                    </div>

                    <!-- Mandalas Category -->
                    <div class="page-thumbnails mandalas">
                        <img src="thumbnails-png/sun_mandala.png" alt="Sun Mandala" data-page="sun_mandala"
                            class="page-thumbnail">
                        <img src="thumbnails-png/modern_mandala.png" alt="Modern Mandala" data-page="modern_mandala"
                            class="page-thumbnail">
                        <img src="thumbnails-png/tree_of_life.png" alt="Tree of Life" data-page="tree_of_life"
                            class="page-thumbnail">
                        <img src="thumbnails-png/oriental_mandala.png" alt="Oriental Mandala"
                            data-page="oriental_mandala" class="page-thumbnail">
                        <img src="thumbnails-png/mandala_pattern.png" alt="Mandala Pattern" data-page="mandala_pattern"
                            class="page-thumbnail">
                        <img src="thumbnails-png/mandala_horse.png" alt="Mandala Horse" data-page="mandala_horse"
                            class="page-thumbnail">
                        <img src="thumbnails-png/mandala_bird.png" alt="Mandala Bird" data-page="mandala_bird"
                            class="page-thumbnail">
                        <img src="thumbnails-png/panda_mandala.png" alt="Panda Mandala" data-page="panda_mandala"
                            class="page-thumbnail">
                        <img src="thumbnails-png/detailed_lotus_mandala.png" alt="Detailed Lotus Mandala"
                            data-page="detailed_lotus_mandala" class="page-thumbnail">
                        <img src="thumbnails-png/mandala_flower.png" alt="Mandala Flower" data-page="mandala_flower"
                            class="page-thumbnail">
                        <img src="thumbnails-png/circle_mandala.png" alt="Circle Mandala" data-page="circle_mandala"
                            class="page-thumbnail">
                    </div>
                    <!-- Various Category -->
                    <div class="page-thumbnails various">
                        <img src="thumbnails-png/boho_style.png" alt="Boho Style" data-page="boho_style"
                            class="page-thumbnail">
                        <img src="thumbnails-png/boat.png" alt="Boat" data-page="boat" class="page-thumbnail">
                        <img src="thumbnails-png/k-pop.png" alt="K-Pop" data-page="k-pop" class="page-thumbnail">
                        <img src="thumbnails-png/cute_cat.png" alt="Cute Cat" data-page="cute_cat"
                            class="page-thumbnail">
                        <img src="thumbnails-png/shapes.png" alt="Shapes" data-page="shapes" class="page-thumbnail">
                        <img src="thumbnails-png/girl_on_swing.png" alt="Girl on Swing" data-page="girl_on_swing"
                            class="page-thumbnail">
                        <img src="thumbnails-png/beach_cleanup_boy.png" alt="Beach Cleanup Boy"
                            data-page="beach_cleanup_boy" class="page-thumbnail">
                        <img src="thumbnails-png/boy_on_swing.png" alt="Boy on Swing" data-page="boy_on_swing"
                            class="page-thumbnail">
                        <img src="thumbnails-png/craft_girl.png" alt="Craft Girl" data-page="craft_girl"
                            class="page-thumbnail">
                        <img src="thumbnails-png/boy_with_glasses.png" alt="Boy with Glasses"
                            data-page="boy_with_glasses" class="page-thumbnail">
                        <img src="thumbnails-png/kawaii_twin_girls.png" alt="Kawaii Twin Girls"
                            data-page="kawaii_twin_girls" class="page-thumbnail">
                        <img src="thumbnails-png/dancing_bean_character.png" alt="Dancing Bean"
                            data-page="dancing_bean_character" class="page-thumbnail">
                    </div>
                </div>
                <div class="game-introduction">
                    <h2>Welcome to Magical Coloring Game!</h2>
                    <p>Unleash your creativity and bring your imagination to life with our enchanting coloring
                        experience!</p>

                    <h3>ğŸŒŸ Magical Features:</h3>
                    <ul>
                        <li>ğŸ’¾ Download & Play Offline Pro: Download the complete game for internet-free coloring
                            anywhere!</li>
                        <li>ğŸ¨ 50+ coloring pages across 5 categories: Free users get 3 per category, Premium unlocks
                            everything!</li>
                        <li>ğŸ–Œï¸ Professional drawing tools: Pencil, Brush, Watercolor, Spray + Premium Glitter, Rainbow
                            & Glow effects!</li>
                        <li>âœ¨ Star Wand to create magical stars</li>
                        <li>ğŸŒ¸ Flower Wand to draw enchanted flowers</li>
                        <li>ğŸª„ Magic Fill tool to color large areas instantly</li>
                        <li>â¬†ï¸ Upload your own coloring pages: Premium feature for unlimited custom content!</li>
                        <li>ğŸ’¾ Save unlimited masterpieces: Free users get 3 daily saves, Premium users get unlimited HD
                            downloads!</li>
                        <li>â†©ï¸ Undo/Redo options for worry-free creation</li>
                        <li>âœ¨ Click the "Animate!" button to animate your character</li>
                        <li>ğŸ–¨ï¸ Print & color offline: Download high-quality pages for traditional coloring!</li>

                    </ul>
                    <h3>ğŸŒŸ Why Go Premium?</h3>
                    <div class="premium-benefits">
                        <h4>ğŸ“± Perfect for Travel & Offline Use:</h4>
                        <p>Download the complete game and color anywhere - in the car, on planes, camping, or anywhere
                            without internet! No more "are we there yet?" moments!</p>

                        <h4>ğŸ¨ For Serious Coloring Enthusiasts:</h4>
                        <p>Upload your AI-generated or purchased coloring pages and bring them to life with professional
                            tools. Create your own digital coloring book collection!</p>

                        <h4>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Value:</h4>
                        <p>One premium purchase unlocks unlimited coloring for the whole family. No daily limits, no
                            restrictions - just pure creative fun!</p>
                    </div>

                    <p>Whether you're a budding artist or just looking for a fun way to relax, Magical Coloring Game is
                        perfect for all ages and skill levels. Start your colorful journey today!</p>

                    <h3>Ready to dive in?</h3>
                    <p>Grab your virtual paintbrush and let your imagination soar. Happy coloring! ğŸŒˆâœ¨</p>
                </div>
                <footer class="copyright">
                    <div class="social-buttons">
                        <a href="mailto:labourthings2@gmail.com" class="social-button email">
                            <i class="fas fa-envelope"></i>
                        </a>
                        <a href="https://www.facebook.com/labourthings" target="_blank" class="social-button facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.instagram.com/labour_things" target="_blank"
                            class="social-button instagram">
                            <i class="fab fa-instagram"></i>
                        </a>

                    </div>
                    <p>&copy; 2024 Labour Things. All rights reserved. | Magical Coloring Game</p>
                </footer>
            </div>
            <script src="quick-fix.js"></script>
            <script src="script.js"></script>
            <script>
                // Son Ã§are - doÄŸrudan HTML'e gÃ¶mÃ¼lÃ¼ Ã§Ã¶zÃ¼m
                window.onload = function () {
                    // SayfanÄ±n tamamen yÃ¼klenmesini bekle
                    setTimeout(function () {
                        console.log("HTML iÃ§indeki thumbnail dÃ¼zeltme kodu Ã§alÄ±ÅŸÄ±yor...");

                        // TÃ¼m thumbnail'larÄ± bul
                        var thumbs = document.querySelectorAll('.page-thumbnail');
                        console.log(thumbs.length + " thumbnail bulundu");

                        // Her thumbnail'a tÄ±klama olayÄ± ekle
                        for (var i = 0; i < thumbs.length; i++) {
                            thumbs[i].onclick = function () {
                                var pageName = this.getAttribute('data-page');
                                console.log("TÄ±klanan: " + pageName);

                                // Manuel olarak boyama sayfasÄ±nÄ± yÃ¼kle
                                var img = new Image();
                                img.crossOrigin = "anonymous";

                                img.onload = function () {
                                    var c = document.getElementById('coloringCanvas');
                                    var cx = c.getContext('2d');

                                    cx.fillStyle = 'white';
                                    cx.fillRect(0, 0, c.width, c.height);

                                    // Resmi canvas'a Ã§iz
                                    cx.drawImage(img, 0, 0, c.width, c.height);
                                    console.log("Resim yÃ¼klendi!");
                                };

                                img.src = "coloring-pages-png/" + pageName + ".png";
                            };
                        }

                        console.log("Thumbnail olaylarÄ± ayarlandÄ±!");
                    }, 3000); // 3 saniye bekle
                };
            </script>

            <script>
                // PREMIUM KONTROL - TEMÄ°Z VERSÄ°YON
                window.addEventListener('load', function () {
                    console.log('Premium kontrol baÅŸlatÄ±lÄ±yor...');

                    // Premium durumunu kontrol et
                    var isPremiumUser = localStorage.getItem('isPremium') === 'true';
                    console.log('Premium kullanÄ±cÄ±:', isPremiumUser);

                    // Eski premium etiketlerini temizle
                    var existingElements = document.querySelectorAll('.premium-badge, .premium-tooltip, .premium-overlay, .lock-overlay, .single-pro-badge');
                    existingElements.forEach(function (el) {
                        if (el && el.parentNode) {
                            el.parentNode.removeChild(el);
                        }
                    });

                    // BulanÄ±klÄ±ÄŸÄ± kaldÄ±r
                    var style = document.createElement('style');
                    style.textContent = `
        .page-thumbnail.locked {
          filter: none !important;
          opacity: 1 !important;
        }
        
        /* Pro rozeti stili */
        .pro-badge {
          position: absolute;
          bottom: 5px;
          right: 5px;
          background: linear-gradient(135deg, #FFB347, #FFCC33);
          color: white;
          font-size: 9px;
          font-weight: bold;
          padding: 1px 4px;
          border-radius: 3px;
          box-shadow: 0 1px 2px rgba(0,0,0,0.2);
          z-index: 1000;
        }
        
    .pro-tooltip {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #FFD700, #FFA500); /* â† Premium sarÄ± gradient */
    color: #2c3e50; /* â† Siyah/koyu gri yazÄ± */
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    font-weight: bold; /* â† KalÄ±n yazÄ± ekleyin */
    width: 180px;
    text-align: center;
    z-index: 10000;
    display: none;
    box-shadow: 0 3px 10px rgba(255, 215, 0, 0.4); /* â† AltÄ±n gÃ¶lge */
}
        
        .pro-tooltip:after {
          content: '';
          position: absolute;
          top: 100%;
          left: 50%;
          margin-left: -5px;
          border-width: 5px;
          border-style: solid;
          border-color: rgba(0, 0, 0, 0.8) transparent transparent transparent;
        }
        
        .thumbnail-container {
          position: relative;
          display: inline-block;
        }
        
        .thumbnail-container:hover .pro-tooltip {
          display: block;
        }
      `;
                    document.head.appendChild(style);

                    // Premium modunda kontroller
                    if (isPremiumUser) {
                        // Premium araÃ§larÄ±nÄ± gÃ¶ster
                        var premiumTools = document.getElementById('premiumTools');
                        if (premiumTools) {
                            premiumTools.style.display = 'flex';
                        }
                        return;
                    }

                    // Her kategori iÃ§in iÅŸlem yap
                    var categories = ['magical', 'flowers', 'animals', 'mandalas', 'various'];

                    categories.forEach(function (category) {
                        var container = document.querySelector('.page-thumbnails.' + category);
                        if (!container) return;

                        var thumbnails = container.querySelectorAll('img.page-thumbnail');

                        // Her kategoride ilk 3 thumbnail dÄ±ÅŸÄ±ndakilere Pro iÅŸareti ekle
                        thumbnails.forEach(function (thumbnail, index) {
                            if (index >= 3) {
                                // BulanÄ±klÄ±ÄŸÄ± kaldÄ±r
                                thumbnail.style.filter = 'none';
                                thumbnail.style.opacity = '1';

                                // Container oluÅŸtur
                                var container = document.createElement('div');
                                container.className = 'thumbnail-container';
                                container.style.position = 'relative';
                                container.style.display = 'inline-block';

                                // Thumbnail'i container'a taÅŸÄ±
                                var parent = thumbnail.parentNode;
                                parent.insertBefore(container, thumbnail);
                                container.appendChild(thumbnail);

                                // Pro rozeti ekle
                                var badge = document.createElement('div');
                                badge.className = 'pro-badge';
                                badge.textContent = 'Pro';
                                container.appendChild(badge);

                                // Tooltip ekle
                                var tooltip = document.createElement('div');
                                tooltip.className = 'pro-tooltip';
                                tooltip.textContent = 'For Premium users!';
                                container.appendChild(tooltip);

                                // Overlay ekle
                                var overlay = document.createElement('div');
                                overlay.style.position = 'absolute';
                                overlay.style.top = '0';
                                overlay.style.left = '0';
                                overlay.style.width = '100%';
                                overlay.style.height = '100%';
                                overlay.style.cursor = 'pointer';
                                overlay.style.zIndex = '1500';
                                container.appendChild(overlay);

                                // TÄ±klama olayÄ±
                                overlay.addEventListener('click', function (e) {
                                    e.preventDefault();
                                    e.stopPropagation();

                                    if (typeof showPremiumModal === 'function') {
                                        showPremiumModal();
                                    } else {
                                        alert('This feature is only available for Premium users!');
                                    }

                                    return false;
                                });

                                // Thumbnail tÄ±klama olayÄ±nÄ± devre dÄ±ÅŸÄ± bÄ±rak
                                thumbnail.addEventListener('click', function (e) {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    return false;
                                }, true);
                            }
                        });
                    });

                    console.log('Premium kontrol tamamlandÄ±');
                });
            </script>
            <script>

                // MOBÄ°L CÄ°HAZLAR Ä°Ã‡Ä°N FILL ARACI DÃœZELTME
                (function () {
                    // Mobil cihaz kontrolÃ¼
                    var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

                    // Sayfa yÃ¼klendiÄŸinde Ã§alÄ±ÅŸ
                    window.addEventListener('load', function () {
                        // Fill butonunu bul
                        var fillButton = document.getElementById('fillBtn');
                        if (!fillButton) return;

                        // Orijinal iÅŸlevi koru
                        var originalSetTool = window.setTool;

                        // Fill iÃ§in Ã¶zel iÅŸlev
                        fillButton.addEventListener('click', function () {
                            // Canvas ve context'i bul
                            var canvas = document.getElementById('coloringCanvas');
                            var ctx = canvas.getContext('2d');

                            // Canvas ayarlarÄ±nÄ± yenile
                            ctx.globalAlpha = 1.0;
                            ctx.globalCompositeOperation = 'source-over';

                            console.log('Fill aracÄ± seÃ§ildi, ayarlar sÄ±fÄ±rlandÄ±:',
                                'Alpha:', ctx.globalAlpha,
                                'Composite:', ctx.globalCompositeOperation);

                            // Orijinal setTool'u Ã§aÄŸÄ±r
                            if (typeof originalSetTool === 'function') {
                                originalSetTool('fill');
                            } else {
                                window.currentTool = 'fill';
                            }
                        });

                        if (isMobile) {
                            // enhanceMobileFill(); // GeÃ§ici kapalÄ±
                            console.log('Mobil cihaz - fill enhancement atlandÄ±');
                        }
                    });

                    // Mobil fill'i gÃ¼Ã§lendir
                    function enhanceMobileFill() {
                        console.log('Mobil fill gÃ¼Ã§lendirmesi etkinleÅŸtiriliyor...');

                        // Orijinal floodFill fonksiyonunu yedekle
                        var originalFloodFill = window.floodFill;

                        // floodFill fonksiyonunu geÃ§ersiz kÄ±l
                        window.floodFill = function (imageData, startX, startY, fillColor, width, height) {
                            console.log('GÃ¼Ã§lendirilmiÅŸ mobil fill Ã§alÄ±ÅŸÄ±yor...');

                            // Canvas'Ä± bul ve ayarlarÄ±nÄ± sÄ±fÄ±rla
                            var canvas = document.getElementById('coloringCanvas');
                            var ctx = canvas.getContext('2d');

                            // Tam opaklÄ±k ve standart kompozisyon zorunlu kÄ±l
                            ctx.globalAlpha = 1.0;
                            ctx.globalCompositeOperation = 'source-over';

                            // DÃ¼z bir arka plan hazÄ±rla - fill iÅŸlemi Ã¶ncesi gÃ¼venlik Ã¶nlemi
                            var backupCanvas = document.createElement('canvas');
                            backupCanvas.width = width;
                            backupCanvas.height = height;
                            var backupCtx = backupCanvas.getContext('2d');
                            backupCtx.drawImage(canvas, 0, 0);

                            // Orijinal fonksiyonu Ã§aÄŸÄ±r
                            if (typeof originalFloodFill === 'function') {
                                originalFloodFill(imageData, startX, startY, fillColor, width, height);
                            } else {
                                // Fonksiyon yoksa basit bir doldurma yap
                                simpleFill(imageData, startX, startY, fillColor, width, height);
                            }

                            // Son temizlik - her ihtimale karÅŸÄ±
                            ctx.globalAlpha = 1.0;
                            ctx.globalCompositeOperation = 'source-over';

                            // Sonucu canvas'a Ã§iz
                            ctx.putImageData(imageData, 0, 0);

                            console.log('Mobil fill tamamlandÄ±');
                        };

                        // Basit fill algoritmasÄ±
                        function simpleFill(imageData, startX, startY, fillColor, width, height) {
                            // BaÅŸlangÄ±Ã§ rengini al
                            var targetColor = getPixelColor(imageData, startX, startY);
                            var stack = [[startX, startY]];
                            var tolerance = 50;
                            var visited = {};
                            visited[startX + ',' + startY] = true;

                            // Renk eÅŸleÅŸme fonksiyonu
                            function colorMatch(color1, color2) {
                                return (
                                    Math.abs(color1.r - color2.r) < tolerance && Math.abs(color1.g - color2.g) < tolerance && Math.abs(color1.b
                                        - color2.b) < tolerance);
                            } // Siyah renk kontrolÃ¼ function isBlack(color) { var blackThreshold=30;
                            return color.r <= blackThreshold && color.g <= blackThreshold && color.b <= blackThreshold;
                        } // Doldurma iÅŸlemi
                        while (stack.length > 0) {
                            var pos = stack.pop();
                            var x = pos[0];
                            var y = pos[1];

                            // Canvas sÄ±nÄ±rlarÄ± dÄ±ÅŸÄ±ndaysa atla
                            if (x < 0 || x >= width || y < 0 || y >= height) continue;

                            // Pikselin rengini kontrol et
                            var currentColor = getPixelColor(imageData, x, y);

                            // Hedef renkle eÅŸleÅŸmiyor veya siyah ise atla
                            if (!colorMatch(currentColor, targetColor) || isBlack(currentColor)) continue;

                            // Pikseli doldur
                            setPixelColor(imageData, x, y, fillColor);

                            // KomÅŸu pikselleri stack'e ekle
                            var key = (x + 1) + ',' + y;
                            if (!visited[key]) {
                                visited[key] = true;
                                stack.push([x + 1, y]);
                            }

                            key = (x - 1) + ',' + y;
                            if (!visited[key]) {
                                visited[key] = true;
                                stack.push([x - 1, y]);
                            }

                            key = x + ',' + (y + 1);
                            if (!visited[key]) {
                                visited[key] = true;
                                stack.push([x, y + 1]);
                            }

                            key = x + ',' + (y - 1);
                            if (!visited[key]) {
                                visited[key] = true;
                                stack.push([x, y - 1]);
                            }
                        }
                    }

                    // Piksel rengi alma
                    function getPixelColor(imageData, x, y) {
                        var index = (y * imageData.width + x) * 4;
                        return {
                            r: imageData.data[index],
                            g: imageData.data[index + 1],
                            b: imageData.data[index + 2],
                            a: imageData.data[index + 3]
                        };
                    }

                    // Piksel rengi ayarlama
                    function setPixelColor(imageData, x, y, color) {
                        var index = (y * imageData.width + x) * 4;
                        imageData.data[index] = color.r;
                        imageData.data[index + 1] = color.g;
                        imageData.data[index + 2] = color.b;
                        imageData.data[index + 3] = 255; // Tam opaklÄ±k
                    }
                }
                )();
            </script>
            <!-- Newsletter Popup -->
            <div id="newsletterModal" class="newsletter-modal" style="display: none;">
                <div class="newsletter-content">
                    <span class="newsletter-close" onclick="closeNewsletterModal()">&times;</span>
                    <h2>ğŸ¨ Special Offers & Updates!</h2>
                    <p>Get exclusive discounts, free coloring pages & early access to premium tools!</p>

                    <form id="newsletterForm" onsubmit="submitNewsletter(event)" novalidate>
                        <input type="text" id="userName" placeholder="Your Name (Optional)" />
                        <input type="email" id="userEmail" placeholder="Your Email" />
                        <button type="submit" id="subscribeBtn">âœ¨ Subscribe</button>
                    </form>

                    <p class="newsletter-note">We'll only send you the good stuff! ğŸŒŸ</p>
                </div>
            </div>

            <!-- Newsletter Button -->
            <button id="newsletterTrigger" class="newsletter-trigger" onclick="showNewsletterModal()">
                ğŸ“§ Get Updates
            </button>

</body>

</html>